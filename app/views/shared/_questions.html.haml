

%ul
-questions.each do |question|
  %li 
    %b Question: 
    =question.question
    =render :partial => 'shared/voting', :locals => {resource: question}
  %br
  -if question.answers.empty?
    No answers available
  -else
    %ul.answers 
      %b Answers 
      -question.answers.each do |answer|
        %li.reg-answer
          -if (question.best_answer && answer.answer == question.best_answer.answer)        
            %span.best-answer=answer.answer
          -else
            %span=answer.answer 
          -if (current_user == question.user)
            =link_to 'Best Answer', best_answer_path(:answer_id => answer.id),:method => :post, :class => 'bestanswer_link'
          =render :partial => 'shared/voting', :locals => {resource: answer}
    %br

